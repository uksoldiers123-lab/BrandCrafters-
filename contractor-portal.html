<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>BrandCrafters — Contractor Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
  <script defer src="script.js"></script>
  <style>
    body.admin-body { margin:0; }
    .main-content { padding:24px 20px 60px; }
    .grid-3 { display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:16px; }
    .grid-2 { display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:16px; }
    @media (max-width:900px){
      .grid-3,.grid-2{ grid-template-columns:1fr; }
    }
    .card.stat-card { min-height:120px; }
    .stat-label { font-size:12px; text-transform:uppercase; letter-spacing:.06em; color:var(--muted); }
    .stat-value { font-size:24px; font-weight:700; margin:6px 0 4px; }
    .muted { color:var(--muted); font-size:13px; }
    .table { width:100%; border-collapse:collapse; font-size:13px; margin-top:8px; }
    .table th,.table td { border-bottom:1px solid rgba(255,255,255,.08); padding:6px 5px; vertical-align:top; }
    .table th { font-size:11px; text-transform:uppercase; letter-spacing:.05em; color:var(--muted); text-align:left; }
    .btn-small{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.25);
      background:rgba(255,255,255,.06);
      color:var(--text);
      font-size:12px;
      cursor:pointer;
    }
    .btn-small:hover{ background:rgba(255,255,255,.12); }
    .script-list .template-block{
      border:1px solid rgba(255,255,255,.1);
      border-radius:12px;
      padding:8px 10px;
      margin-bottom:8px;
      background:rgba(255,255,255,.02);
    }
    .template-title{ font-weight:600; margin-bottom:4px; font-size:13px; }
    .template-body{
      white-space:pre-wrap;
      font-family:inherit;
      font-size:12px;
      color:var(--muted);
      margin:0;
    }
    .admin-email { font-size:12px; color:var(--muted); margin-right:4px; }
    #myLeadForm label{ display:block; font-size:13px; margin-bottom:10px; }
    #myLeadForm input,#myLeadForm textarea,#myLeadForm select{
      width:100%; margin-top:4px; padding:8px 10px;
      border-radius:10px; border:1px solid rgba(255,255,255,.16);
      background:rgba(20,18,32,.6); color:var(--text);
      font-size:13px;
    }
  </style>
</head>

<body class="admin-body">

<!-- HEADER (matches main site with BC icon) -->
<header class="site-header">
  <div class="container header-inner">
    <a class="logo" href="index.html">
      <span class="logo-mark">BC</span><span>BrandCrafters</span>
    </a>

    <!-- Desktop nav -->
    <nav class="nav desktop-nav">
      <a href="index.html" class="nav-link">Home</a>
      <a href="pricing.html" class="nav-link">Pricing</a>
      <a href="customer-inquiry.html" class="nav-link">Customer Portal</a>
      <a href="contractor-portal.html" class="nav-link active">Contractor Portal</a>

      <span id="userEmail" class="admin-email"></span>
      <button id="logoutBtn" class="btn btn-outline">Logout</button>
    </nav>

    <!-- Mobile: Hamburger -->
    <button class="menu-toggle" aria-label="Open menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
  </div>

  <!-- Mobile Drawer -->
  <nav class="mobile-drawer" aria-hidden="true">
    <div class="drawer-header">
      <a class="logo" href="index.html">
        <span class="logo-mark">BC</span><span>BrandCrafters</span>
      </a>
      <button class="menu-close" aria-label="Close menu">✕</button>
    </div>

    <a class="drawer-link" href="index.html">Home</a>
    <a class="drawer-link" href="pricing.html">Pricing</a>
    <a class="drawer-link" href="customer-inquiry.html">Customer Portal</a>
    <a class="drawer-link highlight" href="contractor-portal.html">Contractor Portal</a>
    <button class="drawer-link" id="logoutBtnMobile">Logout</button>
  </nav>
  <div class="drawer-backdrop" aria-hidden="true"></div>
</header>

<main class="main-content container">
  <h1>Contractor Portal</h1>
  <p class="subhead">
    Work your assigned leads, submit your own leads, and use demos &amp; scripts to close deals.
  </p>

  <!-- SUMMARY STATS -->
  <section class="grid-3" style="margin-bottom:24px;">
    <div class="card stat-card">
      <div class="stat-label">My Active Leads</div>
      <div class="stat-value" id="statActiveLeads">0</div>
      <p class="muted">Leads you’re currently working.</p>
    </div>
    <div class="card stat-card">
      <div class="stat-label">Closed Won</div>
      <div class="stat-value" id="statClosedWon">0</div>
      <p class="muted">Closed deals under your email.</p>
    </div>
    <div class="card stat-card">
      <div class="stat-label">Max Open Allowed</div>
      <div class="stat-value" id="statMaxOpen">2</div>
      <p class="muted">Set per contractor by admin.</p>
    </div>
  </section>

  <!-- ADD MY LEAD -->
  <section class="card" style="margin-bottom:24px;">
    <h2>Add My Lead</h2>
    <p class="muted">
      Add a business you found yourself. Admin will approve or deny. If approved, it enters the pool and
      you can still claim and work it. When you both bring the lead and close the sale, your commission can be boosted (admin decides).
    </p>

    <form id="myLeadForm" onsubmit="submitMyLead(event)">
      <div class="grid-2">
        <label>Business Name
          <input id="ml_business_name" required placeholder="Example Grill &amp; Bar" />
        </label>

        <label>Phone
          <input id="ml_phone" required placeholder="(555) 555-5555" />
        </label>

        <label>Email (optional)
          <input id="ml_email" type="email" placeholder="info@business.com" />
        </label>

        <label>Social / Listing URL (optional)
          <input id="ml_social" placeholder="Google Maps / Facebook / Instagram link" />
        </label>

        <label>City / Town
          <input id="ml_city" required placeholder="Unadilla, GA" />
        </label>

        <label>Category
          <input id="ml_category" placeholder="Restaurant, HVAC, Lawn Care…" />
        </label>

        <label>Recommended Package
          <select id="ml_package_recommendation">
            <option value="Starter Craft">Starter Craft ($249)</option>
            <option value="Business Builder" selected>Business Builder ($699)</option>
            <option value="E-Commerce Store">E-Commerce Store ($1,199)</option>
          </select>
        </label>

        <label>Notes for Admin (optional)
          <textarea id="ml_notes" rows="3" placeholder="Why this is a good lead, what you noticed about their website or lack of site…"></textarea>
        </label>
      </div>

      <button type="submit" class="btn btn-primary" style="margin-top:14px;">Submit Lead for Approval</button>
      <p id="myLeadMsg" class="muted"></p>
    </form>
  </section>

  <!-- MY ACTIVE LEADS + MY SUBMITTED LEADS -->
  <section class="card" style="margin-bottom:24px;">
    <h2>My Leads</h2>
    <p class="muted">
      Assigned leads you’re working, plus contractor leads you submitted (with approval status).
    </p>

    <h3 style="margin-top:0;">Assigned to Me</h3>
    <table class="table" id="myLeadsTable">
      <thead>
        <tr>
          <th>Business</th>
          <th>Contact</th>
          <th>Status</th>
          <th>Category</th>
          <th>Package Rec.</th>
          <th>Mockup?</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <p id="myLeadsMsg" class="muted"></p>

    <hr style="margin:18px 0;border-color:rgba(255,255,255,.08);" />

    <h3>Leads I Submitted (Finder)</h3>
    <table class="table" id="mySubmittedTable">
      <thead>
        <tr>
          <th>Business</th>
          <th>City</th>
          <th>Category</th>
          <th>Package</th>
          <th>Approval</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <p id="mySubmittedMsg" class="muted"></p>
  </section>

  <!-- AVAILABLE LEADS -->
  <section class="card" style="margin-bottom:24px;">
    <h2>Available Leads</h2>
    <p class="muted">
      You can only hold up to your max open leads at once. Claim carefully and work them fully.
    </p>

    <table class="table" id="availableLeadsTable">
      <thead>
        <tr>
          <th>Business</th>
          <th>Location</th>
          <th>Phone</th>
          <th>Category</th>
          <th>Package Rec.</th>
          <th></th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <p id="availMsg" class="muted"></p>
  </section>

  <!-- DEMO SITES (LIVE ONLY) -->
  <section class="card" style="margin-bottom:24px;">
    <h2>Demo Sites (Live)</h2>
    <p class="muted">
      Use these demo sites as examples when speaking with leads. Match by category when possible.
    </p>

    <table class="table" id="demoTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Category</th>
          <th>Link</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <p class="muted" id="demoMsg"></p>
  </section>

  <!-- SCRIPTS & PRICING -->
  <section class="card" style="margin-bottom:24px;">
    <h2>Scripts &amp; Pricing</h2>
    <p class="muted">
      Use these exact scripts or copy/paste messages. Pricing is pre-set — do not discount without approval.
    </p>

    <div class="grid-2" style="margin-top:10px;">
      <!-- Scripts -->
      <div>
        <h3>Call Scripts</h3>
        <div id="scriptList" class="script-list"></div>

        <h3 id="email">Email Templates</h3>
        <div id="emailList" class="script-list"></div>

        <h3 id="dm">DM / Social Templates</h3>
        <div id="dmList" class="script-list"></div>
      </div>

      <!-- Pricing -->
      <div>
        <h3>Pricing Cheat Sheet</h3>
        <table class="table">
          <thead>
            <tr><th>Package</th><th>Price</th><th>Base Commission*</th></tr>
          </thead>
          <tbody>
            <tr>
              <td>Starter Craft</td>
              <td>$249</td>
              <td id="commStarter">$50</td>
            </tr>
            <tr>
              <td>Business Builder</td>
              <td>$699</td>
              <td id="commBusiness">$75</td>
            </tr>
            <tr>
              <td>E-Commerce Store</td>
              <td>$1,199</td>
              <td id="commEcommerce">$100</td>
            </tr>
          </tbody>
        </table>
        <p class="muted" style="font-size:12px;">
          *If you both bring the lead and close the sale, admin may add an extra bonus amount on top of the base commission.
        </p>

        <h4 style="margin-top:16px;">Maintenance / Add-Ons (for reference)</h4>
        <ul class="muted" style="font-size:13px;">
          <li>Maintenance (Lite / Standard / Pro / Commerce) — monthly</li>
          <li>Payment Link Setup — $50 per link</li>
          <li>Business Email — $75–$150 per mailbox</li>
          <li>Email Forwarding — $25</li>
          <li>SEO Setup — $125–$200</li>
          <li>Social Media Kit — $75–$150</li>
        </ul>
      </div>
    </div>
  </section>
</main>

<footer class="site-footer">
  <div class="container footer-inner">
    <div>
      © <span id="year"></span> BrandCrafters — A division of Egyptian Hype LLC
      <a href="dashboard.html" class="admin-link">Admin</a>
    </div>
  </div>
</footer>
<script>
  document.getElementById('year').textContent = new Date().getFullYear();
</script>

<!-- SUPABASE + PAGE LOGIC -->
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL = "https://vekoulqehexqosgwacwa.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZla291bHFlaGV4cW9zZ3dhY3dhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMxNTYxNTUsImV4cCI6MjA3ODczMjE1NX0.B9gSHAb_cLCcjCzXM5FegDIKsuQwHCqAFXslfAzzrQ4";
const ADMIN_EMAIL = "srarnold216@gmail.com";

const client = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

let currentUser = null;
let maxOpenLeadsGlobal = 2;
let maxOpenLeadsForUser = 2;

/* AUTH GUARD */
async function guard(){
  const { data } = await client.auth.getUser();
  if (!data || !data.user){
    // send to dashboard to login
    window.location.href = "dashboard.html";
    return;
  }
  if (data.user.email === ADMIN_EMAIL){
    window.location.href = "dashboard.html";
    return;
  }
  currentUser = data.user;
  document.getElementById("userEmail").textContent = currentUser.email;

  await loadSettingsAndContractorProfile();
  await loadEverything();
}
guard();

/* SETTINGS (global + per-contractor) */
async function loadSettingsAndContractorProfile(){
  // Global admin_settings
  const settingsRes = await client.from("admin_settings").select("*").in("key", [
    "contractor_max_open_leads",
    "commission_starter",
    "commission_business",
    "commission_ecommerce"
  ]);
  if (!settingsRes.error){
    const map = {};
    (settingsRes.data || []).forEach(row => { map[row.key] = row.value; });

    maxOpenLeadsGlobal = Number(map["contractor_max_open_leads"] || 2);
    maxOpenLeadsForUser = maxOpenLeadsGlobal;

    if (map["commission_starter"])   document.getElementById("commStarter").textContent   = "$"+map["commission_starter"];
    if (map["commission_business"])  document.getElementById("commBusiness").textContent  = "$"+map["commission_business"];
    if (map["commission_ecommerce"]) document.getElementById("commEcommerce").textContent = "$"+map["commission_ecommerce"];
  }

  // Per-contractor override from contractors table
  if (currentUser){
    const contractorRes = await client
      .from("contractors")
      .select("*")
      .eq("email", currentUser.email)
      .maybeSingle();

    if (!contractorRes.error && contractorRes.data){
      const c = contractorRes.data;
      if (c.max_open_leads && Number(c.max_open_leads) > 0){
        maxOpenLeadsForUser = Number(c.max_open_leads);
      }
    }
  }

  document.getElementById("statMaxOpen").textContent = maxOpenLeadsForUser;
}

/* LOAD ALL MAIN DATA */
async function loadEverything(){
  await Promise.all([
    loadMyLeads(),
    loadMySubmittedLeads(),
    loadAvailableLeads(),
    loadDemos(),
    loadTemplates()
  ]);
}

/* SUBMIT MY LEAD */
async function submitMyLead(e){
  e.preventDefault();
  if (!currentUser) return;

  const body = {
    business_name: document.getElementById("ml_business_name").value,
    phone: document.getElementById("ml_phone").value,
    email: document.getElementById("ml_email").value || null,
    social: document.getElementById("ml_social").value || null,
    city: document.getElementById("ml_city").value,
    category: document.getElementById("ml_category").value || null,
    package_recommendation: document.getElementById("ml_package_recommendation").value,
    call_status: "new",
    assigned_caller_email: null,
    lead_source: "contractor",
    finder_email: currentUser.email,
    approved: false,
    finder_bonus_amount: 0,
    commission_status: "unpaid"
  };

  const notes = document.getElementById("ml_notes").value;
  if (notes){
    console.log("Lead notes:", notes);
  }

  const res = await client.from("call_leads").insert(body);
  const msgEl = document.getElementById("myLeadMsg");

  if (res.error){
    console.error(res.error);
    msgEl.textContent = "Error submitting lead.";
  } else {
    msgEl.textContent = "Lead submitted. Waiting for admin approval.";
    document.getElementById("myLeadForm").reset();
    await loadMySubmittedLeads();
  }
}

/* MY ASSIGNED LEADS */
async function loadMyLeads(){
  if (!currentUser) return;
  const email = currentUser.email;

  const res = await client.from("call_leads")
    .select("*")
    .eq("assigned_caller_email", email)
    .order("created_at", { ascending:false });

  const data = res.data || [];
  const tbody = document.querySelector("#myLeadsTable tbody");
  tbody.innerHTML = "";

  let activeCount = 0;
  let closedWonCount = 0;

  data.forEach(L => {
    const stLower = (L.call_status || "new").toLowerCase();
    if (!["closed won","closed lost","failed"].includes(stLower)) activeCount++;
    if (stLower === "closed won") closedWonCount++;

    const status = L.call_status || "new";

    tbody.innerHTML += `
      <tr>
        <td><strong>${L.business_name||"—"}</strong><br>
          <span class="muted">${L.city||""}</span>
        </td>
        <td>
          <div>${L.phone||"—"}</div>
          <div class="muted">${L.email||""}</div>
        </td>
        <td>
          <select onchange="updateStatus('${L.id}', this.value)">
            <option value="new" ${status==="new"?"selected":""}>New</option>
            <option value="working" ${status==="working"?"selected":""}>Working</option>
            <option value="awaiting reply" ${status==="awaiting reply"?"selected":""}>Awaiting Reply</option>
            <option value="failed" ${status==="failed"?"selected":""}>Failed</option>
            <option value="closed won" ${status==="closed won"?"selected":""}>Closed Won</option>
            <option value="closed lost" ${status==="closed lost"?"selected":""}>Closed Lost</option>
          </select>
        </td>
        <td>${L.category||"—"}</td>
        <td>${L.package_recommendation||"—"}</td>
        <td>
          <select onchange="toggleMockup('${L.id}', this.value)">
            <option value="false" ${!L.mockup_requested?"selected":""}>No</option>
            <option value="true" ${L.mockup_requested?"selected":""}>Suggest</option>
          </select>
        </td>
        <td>
          <button class="btn-small" onclick="releaseLead('${L.id}')">Release</button>
        </td>
      </tr>
    `;
  });

  document.getElementById("statActiveLeads").textContent = activeCount;
  document.getElementById("statClosedWon").textContent = closedWonCount;
  document.getElementById("myLeadsMsg").textContent = data.length ? "" : "You do not have any assigned leads yet.";
}

/* MY SUBMITTED LEADS (as finder) */
async function loadMySubmittedLeads(){
  if (!currentUser) return;
  const email = currentUser.email;

  const res = await client.from("call_leads")
    .select("*")
    .eq("finder_email", email)
    .order("created_at",{ascending:false});

  const data = res.data || [];
  const tbody = document.querySelector("#mySubmittedTable tbody");
  tbody.innerHTML = "";

  data.forEach(L => {
    let approvalText = "Approved";
    if (L.approved === false) approvalText = "Pending Approval";
    if (L.approved === true && !L.assigned_caller_email) approvalText = "Approved (in pool)";
    if (L.approved === true && L.assigned_caller_email) approvalText = "Approved (claimed)";

    tbody.innerHTML += `
      <tr>
        <td><strong>${L.business_name||"—"}</strong></td>
        <td>${L.city||"—"}</td>
        <td>${L.category||"—"}</td>
        <td>${L.package_recommendation||"—"}</td>
        <td class="muted">${approvalText}</td>
      </tr>
    `;
  });

  document.getElementById("mySubmittedMsg").textContent = data.length ? "" : "You haven’t submitted any leads yet.";
}

/* AVAILABLE LEADS (only approved and unassigned) */
async function loadAvailableLeads(){
  const res = await client.from("call_leads")
    .select("*")
    .is("assigned_caller_email", null)
    .eq("call_status","new")
    .eq("approved", true)
    .order("created_at",{ascending:false});

  const data = res.data || [];
  const tbody = document.querySelector("#availableLeadsTable tbody");
  tbody.innerHTML = "";

  data.forEach(L => {
    tbody.innerHTML += `
      <tr>
        <td><strong>${L.business_name||"—"}</strong></td>
        <td>${L.city||"—"}</td>
        <td>${L.phone||"—"}</td>
        <td>${L.category||"—"}</td>
        <td>${L.package_recommendation||"—"}</td>
        <td>
          <button class="btn-small" onclick="claimLead('${L.id}')">Claim</button>
        </td>
      </tr>
    `;
  });

  document.getElementById("availMsg").textContent = data.length
    ? ""
    : "No approved unassigned new leads right now.";
}

/* CLAIM LEAD (respect per-contractor max open) */
async function claimLead(id){
  if (!currentUser) return;
  const email = currentUser.email;

  const res = await client.from("call_leads")
    .select("id, call_status")
    .eq("assigned_caller_email", email);

  const myLeads = res.data || [];
  let openCount = 0;
  myLeads.forEach(L => {
    const st = (L.call_status||"").toLowerCase();
    if (!["closed won","closed lost","failed"].includes(st)) openCount++;
  });

  if (openCount >= maxOpenLeadsForUser){
    alert("You already have the maximum number of open leads you are allowed. Close or release some before claiming more.");
    return;
  }

  const upd = await client.from("call_leads")
    .update({ assigned_caller_email: email, call_status: "working" })
    .eq("id", id)
    .is("assigned_caller_email", null);

  if (upd.error){
    console.error(upd.error);
    alert("Error claiming lead.");
  } else {
    loadEverything();
  }
}

/* RELEASE LEAD (back to pool) */
async function releaseLead(id){
  if (!confirm("Release this lead back to the pool?")) return;

  const upd = await client.from("call_leads")
    .update({
      assigned_caller_email: null,
      call_status: "new"
    })
    .eq("id", id);

  if (upd.error){
    console.error(upd.error);
    alert("Error releasing lead.");
  } else {
    loadEverything();
  }
}

/* UPDATE STATUS */
async function updateStatus(id, status){
  const upd = await client.from("call_leads")
    .update({ call_status: status })
    .eq("id", id);

  if (upd.error){
    console.error(upd.error);
    alert("Error updating status.");
  } else {
    loadMyLeads();
  }
}

/* MOCKUP FLAG */
async function toggleMockup(id, val){
  const upd = await client.from("call_leads")
    .update({ mockup_requested: (val==="true") })
    .eq("id", id);

  if (upd.error){
    console.error(upd.error);
    alert("Error updating mockup flag.");
  }
}

/* DEMO SITES (LIVE ONLY) */
async function loadDemos(){
  const res = await client.from("demo_sites")
    .select("*")
    .eq("is_active", true)
    .order("category",{ascending:true});

  const data = res.data || [];
  const tbody = document.querySelector("#demoTable tbody");
  tbody.innerHTML = "";

  data.forEach(d => {
    const shortUrl = d.demo_url
      ? (d.demo_url.length > 40 ? d.demo_url.slice(0,37) + "..." : d.demo_url)
      : "—";

    tbody.innerHTML += `
      <tr>
        <td><strong>${d.name}</strong></td>
        <td>${d.category || "—"}</td>
        <td>${d.demo_url ? `<a href="${d.demo_url}" target="_blank" class="muted">${shortUrl}</a>` : "—"}</td>
        <td class="muted">${d.notes || ""}</td>
      </tr>
    `;
  });

  document.getElementById("demoMsg").textContent = data.length
    ? ""
    : "No live demos yet. Admin adds these from the Demo Library.";
}

/* SCRIPTS & TEMPLATES */
async function loadTemplates(){
  const res = await client.from("communication_templates")
    .select("*")
    .eq("is_active", true)
    .order("created_at",{ascending:false});

  const data = res.data || [];
  const scriptDiv = document.getElementById("scriptList");
  const emailDiv  = document.getElementById("emailList");
  const dmDiv     = document.getElementById("dmList");

  scriptDiv.innerHTML = "";
  emailDiv.innerHTML  = "";
  dmDiv.innerHTML     = "";

  data.forEach(t => {
    const block = `
      <div class="template-block">
        <div class="template-title">${t.title}</div>
        <pre class="template-body">${(t.content || "").replace(/</g,"&lt;")}</pre>
      </div>
    `;

    if (t.type === "script"){
      scriptDiv.innerHTML += block;
    } else if (t.type === "email"){
      emailDiv.innerHTML += block;
    } else if (t.type === "dm"){
      dmDiv.innerHTML += block;
    }
  });

  if (!scriptDiv.innerHTML) scriptDiv.innerHTML = `<p class="muted">No call scripts yet.</p>`;
  if (!emailDiv.innerHTML)  emailDiv.innerHTML  = `<p class="muted">No email templates yet.</p>`;
  if (!dmDiv.innerHTML)     dmDiv.innerHTML     = `<p class="muted">No DM templates yet.</p>`;
}

/* LOGOUT HOOKS → back to dashboard (which shows login) */
document.getElementById("logoutBtn")?.addEventListener("click", async () => {
  await client.auth.signOut();
  window.location.href = "dashboard.html";
});
document.getElementById("logoutBtnMobile")?.addEventListener("click", async () => {
  await client.auth.signOut();
  window.location.href = "dashboard.html";
});
</script>

</body>
</html>
